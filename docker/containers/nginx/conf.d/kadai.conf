server {
    listen  80;
    charset utf-8;

   location / {

        root   /2021kadai/client/dist/;
        index index.php index.html index.htm;

   }

   location ~ ^/api((/)?(.+))?$ {
       #ディレクトリとファイル名を変数にして読み込みたい
       #ララベルでAPIを受け付ける時にどういうパスにしたら良いか調べる

        alias /2021kadai/api/public/; 
        index index.php index.html index.htm;

        location ~ \.php$ {

            include fastcgi_params;
            include                  fastcgi_params;
            fastcgi_param            SCRIPT_FILENAME $document_root/index.php;
            fastcgi_param            PATHINFO        $fastcgi_path_info;
            fastcgi_param            PATH_TRANSLATED $document_root$fastcgi_path_info;
            fastcgi_split_path_info  ^(.+¥.php)(/.+)$;
            fastcgi_pass application:9000;
            fastcgi_index index.php;

       }
   }
}

